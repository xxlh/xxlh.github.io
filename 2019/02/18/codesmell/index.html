
<!DOCTYPE html>
<html lang="" class="loading">
<head><meta name="generator" content="Hexo 3.8.0">
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>小玲欢</title>

    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="google" content="notranslate">
    <meta name="keywords" content="xlh,"> 
    <meta name="description" content="小玲欢，项目列表,"> 
    <meta name="author" content="xlh"> 
    <link rel="alternative" href="atom.xml" title="小玲欢" type="application/atom+xml"> 
    <link rel="icon" href="/img/little.png"> 
    <link rel="stylesheet" href="//cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.css">
    <link rel="stylesheet" href="/css/diaspora.css">
</head>
</html>
<body class="loading">
    <div id="loader"></div>
    <div id="single">
    <div id="top" style="display: block;">
    <div class="bar" style="width: 0;"></div>
    <a class="icon-home image-icon" href="javascript:;"></a>
    <div title="播放/暂停" class="icon-play"></div>
    <h3 class="subtitle">Code smells</h3>
    <div class="social">
        <!--<div class="like-icon">-->
            <!--<a href="javascript:;" class="likeThis active"><span class="icon-like"></span><span class="count">76</span></a>-->
        <!--</div>-->
        <div>
            <div class="share">
                <a title="获取二维码" class="icon-scan" href="javascript:;"></a>
            </div>
            <div id="qr"></div>
        </div>
    </div>
    <div class="scrollbar"></div>
</div>
    <div class="section">
        <div class="article">
    <div class="main">
        <h1 class="title">Code smells</h1>
        <div class="stuff">
            <span>二月 18, 2019</span>
            

        </div>
        <div class="content markdown">
            <p>如果一段代码是不稳定或者有一些潜在问题的，那么代码往往会包含一些明显的痕迹。<br>正如食物要腐坏之前，经常会发出一些异味一样。</p>
<p>我们管这些痕迹叫做 代码异味。</p>
<ul>
<li><h3 id="1、Duplicated-Code-重复代码"><a href="#1、Duplicated-Code-重复代码" class="headerlink" title="1、Duplicated Code 重复代码"></a>1、Duplicated Code 重复代码</h3><p>  解决方案:</p>
<ul>
<li>同一个class内的两个函数含有相同的表达式。——需要Extract Method，提炼出重复代码，然后让两个地点都调用被提炼出来的那一段代码。</li>
<li>两个互为兄弟的subclass内含相同的表达式，要避免这种情况——需要两个class都使用Extract Method，把Extract的Method推入superclass内。</li>
<li>两个毫不相干的classes内出现Duplicate Code，你应该考虑对其中一个使用Extract Class，将重复代码提炼到一个独立class中，然后在另一个class内使用这个新class。</li>
</ul>
</li>
<li><h3 id="2、Long-Method-过长方法"><a href="#2、Long-Method-过长方法" class="headerlink" title="2、Long Method 过长方法"></a>2、Long Method 过长方法</h3><p> 好处 </p>
<ul>
<li>避免额外开销</li>
<li><p>不需要跳转上下文就能理解程序</p>
<p>解决方案:</p>
</li>
<li>注释</li>
<li>条件式</li>
<li>循环</li>
</ul>
</li>
<li><h3 id="3、Large-Class-过大类"><a href="#3、Large-Class-过大类" class="headerlink" title="3、Large Class 过大类"></a>3、Large Class 过大类</h3><p> 解决方案:</p>
<ul>
<li>变量 &amp; 方法</li>
<li>重新抽象</li>
</ul>
</li>
<li><h3 id="4、Long-Parameter-List-过长参数列表"><a href="#4、Long-Parameter-List-过长参数列表" class="headerlink" title="4、Long Parameter List 过长参数列表"></a>4、Long Parameter List 过长参数列表</h3><p> 会导致哪些问题</p>
<ul>
<li>无用／开关／分类参数</li>
<li>难以理解</li>
<li>前后不一致，不易使用</li>
<li><p>经常需要修改</p>
<p>解决方案: 抽象成类</p>
</li>
</ul>
</li>
<li><h3 id="5、Divergent-Change-发散式变化"><a href="#5、Divergent-Change-发散式变化" class="headerlink" title="5、Divergent Change 发散式变化"></a>5、Divergent Change 发散式变化</h3><p> 表现：一个类受到多种变化的影响</p>
<p> 解决方案:重构，保持类功能单一</p>
</li>
<li><h3 id="6、Shotgun-Surgery-散弹式修改"><a href="#6、Shotgun-Surgery-散弹式修改" class="headerlink" title="6、Shotgun Surgery 散弹式修改"></a>6、Shotgun Surgery 散弹式修改</h3><p> 表现：一种变化引发多个类相应修改</p>
<p> 解决方案:提取变化部分为公共的类</p>
</li>
<li><h3 id="7、Feature-Envy-依恋情节"><a href="#7、Feature-Envy-依恋情节" class="headerlink" title="7、Feature Envy 依恋情节"></a>7、Feature Envy 依恋情节</h3><p> 表现：使用了大量其他类的成员</p>
<p> 解决方案:需要在一起的，就让他们在一起</p>
</li>
<li><h3 id="8、Data-Clumps-数据泥团"><a href="#8、Data-Clumps-数据泥团" class="headerlink" title="8、Data Clumps 数据泥团"></a>8、Data Clumps 数据泥团</h3><p> 表现：常一起出现的一堆数据</p>
<p> 解决方案:那么有基情，就在一起吧，给他们一个新的类。</p>
</li>
<li><h3 id="9、Primitive-Obsession-基本类型偏执"><a href="#9、Primitive-Obsession-基本类型偏执" class="headerlink" title="9、Primitive Obsession 基本类型偏执"></a>9、Primitive Obsession 基本类型偏执</h3><p> 解决方案:</p>
<ul>
<li>反复出现的一组参数，抽象成类</li>
<li>有关联的多个数组，抽象成类</li>
</ul>
</li>
<li><h3 id="10、Switch-Statements-switch惊悚现身"><a href="#10、Switch-Statements-switch惊悚现身" class="headerlink" title="10、Switch Statements switch惊悚现身"></a>10、Switch Statements switch惊悚现身</h3><p> 解决方案:state/strategy/多态</p>
</li>
<li><h3 id="11、Parallel-Inheritance-Hierarchies-平等继承体系"><a href="#11、Parallel-Inheritance-Hierarchies-平等继承体系" class="headerlink" title="11、Parallel Inheritance Hierarchies 平等继承体系"></a>11、Parallel Inheritance Hierarchies 平等继承体系</h3><p> 表现：每当你为某个class增加一个subclass，必须也为另一个class相应增加一个subclass</p>
<p> 解决方案:应该有一个类是可以去掉继承关系</p>
</li>
<li><h3 id="12、Lazy-Class-冗余类"><a href="#12、Lazy-Class-冗余类" class="headerlink" title="12、Lazy Class 冗余类"></a>12、Lazy Class 冗余类</h3><p> 解决方案:删除</p>
</li>
<li><h3 id="13、Speculative-Generality-夸夸其谈未来"><a href="#13、Speculative-Generality-夸夸其谈未来" class="headerlink" title="13、Speculative Generality 夸夸其谈未来"></a>13、Speculative Generality 夸夸其谈未来</h3><p> 解决方案:删除</p>
</li>
<li><h3 id="14、Temporary-Field-临时字段"><a href="#14、Temporary-Field-临时字段" class="headerlink" title="14、Temporary Field 临时字段"></a>14、Temporary Field 临时字段</h3><p> 解决方案: 抽象成类</p>
</li>
<li><h3 id="15、-Message-Chains-过度耦合的消息链"><a href="#15、-Message-Chains-过度耦合的消息链" class="headerlink" title="15、 Message Chains 过度耦合的消息链"></a>15、 Message Chains 过度耦合的消息链</h3><p> 表现：用户向一个对象索求另一个对象，然后再向后者索求另一个对象，然后再索求另一个对象……这就是Message Chain</p>
<p> 解决方案：拆</p>
</li>
<li><h3 id="16、Middle-Man-中间转手人"><a href="#16、Middle-Man-中间转手人" class="headerlink" title="16、Middle Man  中间转手人"></a>16、Middle Man  中间转手人</h3><p> 表现：某个类接口有一半的方法都委托给其它类</p>
<p> 实质：委托的过度使用</p>
<p> 解决方案:继承代替委托</p>
</li>
<li><h3 id="17、Inappropriate-Intimacy-太亲密"><a href="#17、Inappropriate-Intimacy-太亲密" class="headerlink" title="17、Inappropriate Intimacy  太亲密"></a>17、Inappropriate Intimacy  太亲密</h3><p>  表现：两个类彼此使用对方私有的成员或方法</p>
<p>  解决方案:划清界限拆散／合并／单向联系</p>
</li>
<li><h3 id="18、Alternative-Classes-with-Different-Interfaces-不同接口的相似类"><a href="#18、Alternative-Classes-with-Different-Interfaces-不同接口的相似类" class="headerlink" title="18、Alternative Classes with Different Interfaces 不同接口的相似类"></a>18、Alternative Classes with Different Interfaces 不同接口的相似类</h3><p>  解决方案:合并</p>
</li>
<li><h3 id="19、Incomplete-Library-Class-不完善的类库"><a href="#19、Incomplete-Library-Class-不完善的类库" class="headerlink" title="19、Incomplete Library Class 不完善的类库"></a>19、Incomplete Library Class 不完善的类库</h3><p>  解决方案: 包一层函数或包装成新的类</p>
</li>
<li><h3 id="20、Data-Class-纯稚的数据类"><a href="#20、Data-Class-纯稚的数据类" class="headerlink" title="20、Data Class 纯稚的数据类"></a>20、Data Class 纯稚的数据类</h3><p>  解决方案:将相关操作封装进去，减少public成员变量</p>
</li>
<li><h3 id="21、Refused-Bequest-被拒绝的遗赠"><a href="#21、Refused-Bequest-被拒绝的遗赠" class="headerlink" title="21、Refused Bequest 被拒绝的遗赠"></a>21、Refused Bequest 被拒绝的遗赠</h3><p>  表现：父类里面方法很多，子类只用有限几个</p>
<p>  实质：继承体系设计错误</p>
<p>  解决方案:用代理替代继承关系</p>
</li>
<li><h3 id="22、Comments-过多注释"><a href="#22、Comments-过多注释" class="headerlink" title="22、Comments 过多注释"></a>22、Comments 过多注释</h3><p>  解决方案:避免用注释解释代码，而是说明代码的目的，背景等，好代码自己会说话</p>
</li>
</ul>
<p>参考资料<br>《重构-改善既有代码的设计》<br><a href="https://sourcemaking.com/refactoring/smells" target="_blank" rel="noopener">https://sourcemaking.com/refactoring/smells</a></p>

            <!--[if lt IE 9]><script>document.createElement('audio');</script><![endif]-->
            <audio id="audio" loop="1" preload="auto" controls="controls" data-autoplay="false">
                <source type="audio/mpeg" src="">
            </audio>
            
                <ul id="audio-list" style="display:none">
                    
                        <li title="0" data-url="http://link.hhtjim.com/163/5146554.mp3"></li>
                    
                        <li title="1" data-url="http://link.hhtjim.com/qq/001faIUs4M2zna.mp3"></li>
                    
                </ul>
            
        </div>
        
    <div id="gitalk-container" class="comment link" data-ae="false" data-ci="eb6ac85a4ad481172edc" data-cs="514767e33035489eefe05551096641c017533dcd" data-r="xxlh.github.io" data-o="xxlh" data-a="xxlh" data-d="false" data-t="Code smells">查看评论</div>


    </div>
    
</div>


    </div>
</div>
</body>
<script src="//cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.min.js"></script>
<script src="//lib.baomitu.com/jquery/1.8.3/jquery.min.js"></script>
<script src="/js/plugin.js"></script>
<script src="/js/diaspora.js"></script>
<link rel="stylesheet" href="/photoswipe/photoswipe.css">
<link rel="stylesheet" href="/photoswipe/default-skin/default-skin.css">
<script src="/photoswipe/photoswipe.min.js"></script>
<script src="/photoswipe/photoswipe-ui-default.min.js"></script>

<!-- Root element of PhotoSwipe. Must have class pswp. -->
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">
    <!-- Background of PhotoSwipe. 
         It's a separate element as animating opacity is faster than rgba(). -->
    <div class="pswp__bg"></div>
    <!-- Slides wrapper with overflow:hidden. -->
    <div class="pswp__scroll-wrap">
        <!-- Container that holds slides. 
            PhotoSwipe keeps only 3 of them in the DOM to save memory.
            Don't modify these 3 pswp__item elements, data is added later on. -->
        <div class="pswp__container">
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
        </div>
        <!-- Default (PhotoSwipeUI_Default) interface on top of sliding area. Can be changed. -->
        <div class="pswp__ui pswp__ui--hidden">
            <div class="pswp__top-bar">
                <!--  Controls are self-explanatory. Order can be changed. -->
                <div class="pswp__counter"></div>
                <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
                <button class="pswp__button pswp__button--share" title="Share"></button>
                <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
                <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>
                <!-- Preloader demo http://codepen.io/dimsemenov/pen/yyBWoR -->
                <!-- element will get class pswp__preloader--active when preloader is running -->
                <div class="pswp__preloader">
                    <div class="pswp__preloader__icn">
                      <div class="pswp__preloader__cut">
                        <div class="pswp__preloader__donut"></div>
                      </div>
                    </div>
                </div>
            </div>
            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                <div class="pswp__share-tooltip"></div> 
            </div>
            <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
            </button>
            <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
            </button>
            <div class="pswp__caption">
                <div class="pswp__caption__center"></div>
            </div>
        </div>
    </div>
</div>




</html>